<style lang="scss">
  @import '../styles/mixins.scss';

  .login--title {
    @include titletext;
  }
  .login--subtitle{
    @include subtitletext;
  }
</style>
<template>
  <view class="container padbox--default">
    <view class="login--title">登录</view>
    <view class="login--subtitle">fido欢迎nin回来👏</view>
    <formparent>
      <view class="">stuff here</view>
    </formparent>
  </view>
  <view wx:if="{{isRegistered}}">
    <redirectmodal :message="message"/>
  </view>
</template>
<script>
  import wepy from 'wepy'
  import RedirectModal from '@/components/redirect-modal'
  import FormParent from '@/components/form-parent'

  export default class Login extends wepy.page {
    config = {
      navigationBarTitleText: '登录'
    }

    data = {
      message: '你已经登录了',
      isRegistered: false
    }

    components = {
      formparent: FormParent,
      redirectmodal: RedirectModal
    }
    computed = {}

    onShow () {
      this.isRegistered = this.$parent.globalData.user.isRegistered
    }

    onPullDownRefresh () {
      wepy.stopPullDownRefresh()
    }
  }
</script>
